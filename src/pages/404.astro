---
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Layout from '../layouts/Layout.astro';
import { getTranslations, getLangFromUrl } from '../i18n/ui';

import '../styles/main.scss';

// Simple language detection: check what comes after /alirio/
const urlPath = Astro.url.pathname;
console.log('404 Page - Full URL path:', urlPath);

// Extract the segment after /alirio/
const segments = urlPath.split('/').filter(segment => segment);
console.log('404 Page - URL segments:', segments);

let detectedLang = 'en';

// Check if first segment is 'alirio' and second segment is a language code
if (segments[0] === 'alirio' && segments.length > 1) {
  const languageSegment = segments[1];
  console.log('404 Page - Language segment after alirio:', languageSegment);
  
  if (languageSegment === 'sv' || languageSegment === 'bs' || 
      languageSegment === 'ar' || languageSegment === 'ku' || languageSegment === 'sy') {
    detectedLang = languageSegment;
    console.log('404 Page - Detected language:', detectedLang);
  } else {
    console.log('404 Page - No valid language code found, using English');
  }
} else {
  console.log('404 Page - No alirio base path or no language segment, using English');
}

console.log('404 Page - Final detected language:', detectedLang);

// 404 page content translations
const errorContent = {
  en: {
    title: "Page Not Found",
    subtitle: "Oops! The page you're looking for doesn't exist.",
    description: "The page you're looking for might have been moved, deleted, or you entered the wrong URL.",
    backHome: "Back to Home",
    backHomeUrl: "/alirio/",
    errorCode: "404"
  },
  bs: {
    title: "Stranica nije pronađena",
    subtitle: "Ups! Stranica koju tražite ne postoji.",
    description: "Stranica koju tražite možda je premještena, obrisana ili ste unijeli pogrešan URL.",
    backHome: "Povratak na početnu",
    backHomeUrl: "/alirio/bs/",
    errorCode: "404"
  },
  sv: {
    title: "Sidan hittades inte",
    subtitle: "Oj! Sidan du letar efter finns inte.",
    description: "Sidan du letar efter kan ha flyttats, tagits bort eller du angav fel URL.",
    backHome: "Tillbaka till startsidan",
    backHomeUrl: "/alirio/sv/",
    errorCode: "404"
  }
};

const currentContent = errorContent[detectedLang] || errorContent.en;
console.log('404 Page - Selected content for language:', detectedLang);
console.log('404 Page - Content title:', currentContent.title);
---

<Layout title={currentContent.title} description={currentContent.description}>
  <main class="error-page">
    <div class="error-page__container container">
      <div class="error-page__content">
        <div class="error-page__error-code">
          {currentContent.errorCode}
        </div>
        
        <h1 class="error-page__title">
          {currentContent.title}
        </h1>
        
        <p class="error-page__subtitle">
          {currentContent.subtitle}
        </p>
        
        <p class="error-page__description">
          {currentContent.description}
        </p>
        
        <div class="error-page__actions">
          <a href={currentContent.backHomeUrl} class="error-page__button">
            {currentContent.backHome}
          </a>
        </div>
      </div>
    </div>
  </main>
</Layout>


