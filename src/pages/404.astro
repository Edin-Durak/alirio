---
import Layout from '../layouts/Layout.astro';


import '../styles/main.scss';

// Simple language detection from URL path
const urlPath = Astro.url.pathname;
console.log('404 Page - Full URL path:', urlPath);

// Extract language from URL path
const segments = urlPath.split('/').filter(segment => segment);
console.log('404 Page - URL segments:', segments);

let detectedLang = 'sv'; // Default to Swedish

// Check if first segment is a language code
if (segments.length > 0) {
  const languageSegment = segments[0];
  console.log('404 Page - Language segment:', languageSegment);
  
  if (languageSegment === 'sv' || languageSegment === 'bs' || 
      languageSegment === 'ar' || languageSegment === 'en') {
    detectedLang = languageSegment;
    console.log('404 Page - Detected language:', detectedLang);
  } else {
    console.log('404 Page - No valid language code found, using Swedish');
  }
} else {
  console.log('404 Page - No segments found, using Swedish');
}

console.log('404 Page - Final detected language:', detectedLang);

// 404 page content translations
const errorContent = {
  en: {
    title: "Page Not Found",
    subtitle: "Oops! The page you're looking for doesn't exist.",
    description: "The page you're looking for might have been moved, deleted, or you entered the wrong URL.",
    backHome: "Back to Home",
    backHomeUrl: "/en/",
    errorCode: "404"
  },
  bs: {
    title: "Stranica nije pronađena",
    subtitle: "Ups! Stranica koju tražite ne postoji.",
    description: "Stranica koju tražite možda je premještena, obrisana ili ste unijeli pogrešan URL.",
    backHome: "Povratak na početnu",
    backHomeUrl: "/bs/",
    errorCode: "404"
  },
  sv: {
    title: "Sidan hittades inte",
    subtitle: "Oj! Sidan du letar efter finns inte.",
    description: "Sidan du letar efter kan ha flyttats, tagits bort eller du angav fel URL.",
    backHome: "Tillbaka till startsidan",
    backHomeUrl: "/",
    errorCode: "404"
  },
  ar: {
    title: "الصفحة غير موجودة",
    subtitle: "عذراً! الصفحة التي تبحث عنها غير موجودة.",
    description: "الصفحة التي تبحث عنها قد تكون محذوفة أو تم تغيير عنوانها أو أدخلت عنوان URL خاطئ.",
    backHome: "العودة للرئيسية",
    backHomeUrl: "/ar/",
    errorCode: "404"
  }
};

console.log('404 Page - Available errorContent keys:', Object.keys(errorContent));
console.log('404 Page - Trying to access errorContent[', detectedLang, ']');
console.log('404 Page - errorContent[detectedLang] result:', errorContent[detectedLang as keyof typeof errorContent]);

const currentContent = errorContent[detectedLang as keyof typeof errorContent] || errorContent.sv;
console.log('404 Page - Selected content for language:', detectedLang);
console.log('404 Page - Content title:', currentContent.title);
---

<Layout title={currentContent.title} description={currentContent.description}>
    
  <main class="error-page">
    <div class="error-page__container container">
      <div class="error-page__content">
        <div class="error-page__error-code">
          {currentContent.errorCode}
        </div>
        
        <h1 class="error-page__title">
          {currentContent.title}
        </h1>
        
        <p class="error-page__subtitle">
          {currentContent.subtitle}
        </p>
        
        <p class="error-page__description">
          {currentContent.description}
        </p>
        
        <div class="error-page__actions">
          <a href={currentContent.backHomeUrl} class="error-page__button">
            {currentContent.backHome}
          </a>
        </div>
      </div>
    </div>
  </main>
</Layout>